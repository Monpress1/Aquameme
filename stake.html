<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AquaCoinX | Staking Portal</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tonweb@0.0.66/dist/tonweb.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        :root {
            --bg-dark: #050b14;
            --card-dark: #111827;
            --blue-accent: #3b82f6;
            --text-main: #ffffff;
            --text-muted: #9ca3af;
        }

        body { 
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Oxanium', sans-serif;
            margin: 0;
            padding-bottom: 100px; /* Space for bottom menu */
            -webkit-tap-highlight-color: transparent;
        }

        /* --- Main Gradient Card --- */
        .balance-card {
            background: linear-gradient(135deg, #2563eb 0%, #1e3a8a 100%);
            border-radius: 24px;
            box-shadow: 0 10px 30px -10px rgba(37, 99, 235, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        /* Diamond Icon Background Opacity */
        .diamond-bg {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            background: rgba(255,255,255,0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- Tiers --- */
        .tier-card {
            background: #0f1623;
            border: 1px solid #1f2937;
            border-radius: 20px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tier-card.active {
            border: 2px solid var(--blue-accent);
            background: linear-gradient(180deg, rgba(59, 130, 246, 0.1) 0%, rgba(15, 22, 35, 0) 100%);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
        }

        .badge {
            font-size: 9px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
        }
        .badge-popular { background: #1e3a8a; color: #60a5fa; }
        .badge-whale { background: #374151; color: #9ca3af; }

        /* --- Inputs --- */
        .custom-input {
            background: #0f1623;
            border: 1px solid #1f2937;
            color: white;
            font-family: 'Oxanium', sans-serif;
        }
        .custom-input:focus {
            border-color: var(--blue-accent);
            outline: none;
        }

        /* --- Bottom Navigation --- */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #0b111b;
            border-top: 1px solid #1f2937;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            padding-bottom: 20px;
            padding-top: 12px;
            z-index: 50;
        }

        .nav-item {
            display: flex;
            flex-col: column;
            flex-direction: column;
            align-items: center;
            color: #64748b;
            font-size: 10px;
            font-weight: 600;
            gap: 4px;
            width: 20%;
        }

        .nav-item.active { color: white; }
        .nav-item i { font-size: 18px; margin-bottom: 2px; }

        /* Center Spin Button */
        .spin-btn-wrapper {
            position: relative;
            top: -25px; /* Push it up */
        }
        
        .spin-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
            border: 4px solid #0b111b; /* Matches body bg to look cut out */
        }

        .spin-icon {
            font-size: 24px;
            color: white;
            animation: spin-slow 3s linear infinite;
        }

        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* --- Utility --- */
        .glass-panel {
            background: #111827;
            border: 1px solid #1f2937;
            border-radius: 20px;
        }

        /* Hide Scrollbar */
        ::-webkit-scrollbar { display: none; }
        
        /* TonConnect Button Customization */
        #ton-connect button {
            background: white !important;
            color: black !important;
            border-radius: 20px !important;
            font-weight: 700 !important;
            height: 36px !important;
            font-family: 'Oxanium', sans-serif !important;
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen">

    <div class="w-full max-w-md flex justify-between items-center p-5 pt-6">
        <div>
            <h1 class="text-2xl font-black italic tracking-tighter text-[#3b82f6]">AQUAM<span class="text-white">Stake</span></h1>
            <p class="text-[9px] font-bold tracking-[0.3em] text-gray-500 uppercase">Staking Portal</p>
        </div>
        <div class="flex items-center gap-3">
            <button class="w-9 h-9 rounded-full bg-[#111827] border border-gray-800 flex items-center justify-center text-gray-400">
                <i class="fa fa-cog"></i>
            </button>
            <div id="ton-connect"></div>
        </div>
    </div>

    <div class="w-full max-w-md px-4 space-y-5">

        <div class="balance-card p-6 text-white">
            <div class="diamond-bg">
                <i class="fa fa-gem"></i>
            </div>
            
            <p class="text-[10px] opacity-70 uppercase font-bold tracking-widest mb-1">Total Balance</p>
            <h2 id="dashboardBalance" class="text-3xl font-black italic tracking-tight">0.00 AQUAM</h2>
            <p class="text-[11px] opacity-60 mt-1 mb-6">â‰ˆ $<span id="usdBalance">0.00</span> USD</p>

            <div class="flex justify-between text-[9px] font-bold uppercase tracking-wider opacity-80 mb-2">
                <span>Maturity Progress</span>
                <span id="daysLeftDisplay">0 Days Left</span>
            </div>
            
            <div class="w-full h-2 bg-black/30 rounded-full overflow-hidden mb-2">
                <div id="progressBar" class="h-full bg-blue-300 shadow-[0_0_10px_white] w-0 transition-all duration-1000"></div>
            </div>

            <div class="flex justify-between items-center mt-3 pt-3 border-t border-white/10">
                <span class="text-[9px] opacity-50 uppercase font-bold">No Tier</span>
                <span class="text-[9px] opacity-50 uppercase font-mono">Locked until ---</span>
            </div>
            
            <div class="hidden">
                 <span id="totalExpectedInterest">0</span>
                 <span id="totalWithdrawn">0</span>
                 <button id="endStakeBtn" onclick="openEndStakeModal()">End</button>
            </div>
        </div>

        <div class="glass-panel p-5 flex items-center justify-between">
            <div>
                <p class="text-[9px] text-gray-400 uppercase font-bold tracking-widest mb-1">Pending Rewards</p>
                <h3 class="text-xl font-bold text-green-400" id="pendingReward">0.00 <span class="text-xs text-gray-500">AQUAM</span></h3>
            </div>
            <button onclick="attemptWithdrawal()" class="bg-[#1f2937] hover:bg-gray-700 text-white px-5 py-2.5 rounded-xl text-[10px] font-bold uppercase border border-gray-700 flex items-center gap-2">
                Withdraw <i class="fa fa-arrow-down"></i>
            </button>
            <p id="penaltyWarning" class="hidden"></p> </div>

        <div>
            <h3 class="text-xs font-bold uppercase text-gray-500 mb-3 ml-1">Select Investment Tier</h3>
            <div class="grid grid-cols-2 gap-3">
                
                <div class="tier-card active p-4 cursor-pointer relative" onclick="selectTier('aquastaker')" id="btn-aquastaker">
                    <div class="absolute top-3 right-3 badge badge-popular">Popular</div>
                    <div class="text-blue-500 text-xl mb-3"><i class="fa fa-water"></i></div>
                    <h4 class="font-bold text-sm text-white">Aquastakers</h4>
                    <p class="text-[10px] text-gray-500 mb-3">90 Days Lock</p>
                    
                    <ul class="text-[9px] text-gray-400 space-y-1.5 font-medium">
                        <li><i class="fa fa-check text-green-500 mr-1"></i> 30% Fixed APY</li>
                        <li><i class="fa fa-check text-green-500 mr-1"></i> Daily Withdraws</li>
                        <li><i class="fa fa-check text-green-500 mr-1"></i> Min: $100</li>
                        <li><i class="fa fa-check text-green-500 mr-1"></i> interest: 30% </li>
                    </ul>
                </div>

                <div class="tier-card p-4 cursor-pointer relative" onclick="selectTier('otc')" id="btn-otc">
                    <div class="absolute top-3 right-3 badge badge-whale">Whale</div>
                    <div class="text-yellow-400 text-xl mb-3"><i class="fa fa-crown"></i>
                    
                    </div>
                    <h4 class="font-bold text-sm text-gray-300">Aqua OTC</h4>
                    <p class="text-[10px] text-gray-500 mb-3">180 Days Lock </p>
                    
                    <ul class="text-[9px] text-gray-500 space-y-1.5 font-medium">
                        <li><i class="fa fa-check text-orange-500 mr-1"></i> High Priority</li>
                        <li><i class="fa fa-check text-orange-500 mr-1"></i> Daily Withdraws</li>
                        <li><i class="fa fa-check text-orange-500 mr-1"></i> Min: $10,000</li>
                        <li><i class="fa fa-check text-orange-500 mr-1"></i> interest: 60% </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="glass-panel p-5 space-y-4">
            <div class="flex justify-between items-center">
                <span class="text-xs font-bold text-gray-400">Amount (USD)</span>
                <span class="text-[9px] font-mono text-blue-400" id="liveRate">1 AQUA = $0.0000</span>
            </div>

            <div class="relative">
                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold">$</span>
                <input type="number" id="usdInput" placeholder="1000" oninput="calculateTokens()" 
                       class="w-full custom-input rounded-xl p-3 pl-8 font-bold text-lg">
            </div>

            <div class="flex justify-between items-center bg-black/20 p-3 rounded-lg border border-dashed border-gray-700">
                <span class="text-[9px] font-bold text-gray-500 uppercase">You Receive</span>
                <span id="aquamPreview" class="text-sm font-bold text-blue-400">0.00 AQUAM</span>
            </div>

            <p class="text-[9px] text-gray-500 italic text-center">*Capital locked for 90 days. Daily rewards enabled.</p>

            <button id="stakeBtn" onclick="processStaking()" disabled 
                    class="w-full bg-[#1e293b] text-gray-400 py-3.5 rounded-xl font-bold uppercase tracking-widest text-xs transition-all disabled:opacity-50">
                Enter Amount
            </button>
        </div>

    </div>

    <div class="bottom-nav">
        <div class="nav-item">
            <i class="fa fa-home"></i>
            <span>HOME</span>
        </div>
        <div class="nav-item">
            <i class="fa fa-exchange-alt"></i>
            <span>SWAP</span>
        </div>
        
        <div class="nav-item">
            <div class="spin-btn-wrapper">
                <div class="spin-btn">
                    <i class="fa fa-sync spin-icon"></i>
                </div>
            </div>
            <span class="text-blue-400 relative -top-1">STAKE</span>
        </div>

        <div class="nav-item active">
            <i class="fa fa-chart-line text-blue-400"></i>
            <span class="text-blue-400">MARKET</span>
        </div>
        <div class="nav-item">
            <i class="fa fa-wallet"></i>
            <span>WALLET</span>
        </div>
    </div>

    <div id="endStakeModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
        <div class="glass-panel w-full max-w-sm p-6 relative">
            <button onclick="closeEndStakeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <i class="fa fa-times"></i>
            </button>
            <h3 class="text-xl font-black italic text-blue-400 mb-4">END STAKE</h3>
            <p class="text-xs text-gray-400 mb-4">Confirm destination wallet.</p>
            <div class="space-y-3">
                <input type="text" id="withdrawalWalletInput" class="w-full custom-input rounded-xl p-3 text-xs font-mono">
                <button onclick="pasteAddress()" class="text-xs text-blue-400 w-full text-right">PASTE ADDRESS</button>
            </div>
            <button onclick="confirmEndStake()" class="w-full mt-6 bg-green-600 text-white py-3 rounded-xl font-bold uppercase">
                CONFIRM & WITHDRAW
            </button>
        </div>
    </div>

    <div id="toast" class="fixed top-5 left-1/2 -translate-x-1/2 bg-[#1f2937] border border-gray-700 px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 opacity-0 pointer-events-none transition-all duration-300 z-[200]">
        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
        <span class="text-xs font-bold text-white" id="toastMsg">Notification</span>
    </div>

<script>
    // --  CONFIGURATION ---
    const TREASURY_WALLET = "UQC4RmumETyDDKR1IaM8CST_pHeTFBdzgRqAj96TTM2J8w1D";
    const SUPABASE_URL = "https://ptllbgdixhesptlkqrqa.supabase.co/functions/v1/Pay";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0bGxiZ2RpeGhlc3B0bGtxcnFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5MzU5MzMsImV4cCI6MjA4NTUxMTkzM30.KGa_rx-CttqT6foXSfHVF2-SiQalOcpWTtRMsdT9R_c";

    // --- GLOBAL STATE ---
    let userWalletAddress = null;
    let friendlyAddress = null;
    let currentPrice = 0.09; 
    let currentTier = 'aquastaker';
    
    let activeStake = {
        stakedAmount: 0,
        daysLeft: 90, 
        pendingReward: 0,
        totalExpected: 0,
        totalWithdrawn: 0,
        hasActiveStake: false
    };

    // --- TON CONNECT UI INITIALIZATION ---
    const tonUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: "https://raw.githubusercontent.com/ton-connect/demo-dapp-with-react-ui/master/public/tonconnect-manifest.json",
        buttonRootId: "ton-connect"
    });

    // --- 1. TIER SELECTION ---
    window.selectTier = function(tier) {
        currentTier = tier;
        document.querySelectorAll('.tier-card').forEach(b => b.classList.remove('active'));
        const activeBtn = document.getElementById(`btn-${tier}`);
        if(activeBtn) activeBtn.classList.add('active');
        
        const input = document.getElementById('usdInput');
        if(input) {
            input.placeholder = (tier === 'aquastaker') ? "100" : "10,000";
        }
        window.calculateTokens(); 
    }

    // --- 2. WALLET STATUS & DATA SYNC ---
    tonUI.onStatusChange(wallet => {
        if (wallet) {
            userWalletAddress = wallet.account.address;
            friendlyAddress = new TonWeb.utils.Address(userWalletAddress).toString(true, true, false);
            
            const stakeBtn = document.getElementById('stakeBtn');
            if(stakeBtn) {
                stakeBtn.innerText = "ENTER AMOUNT";
                stakeBtn.disabled = true;
                // Change style to active blue when wallet connected but waiting for input
                stakeBtn.classList.remove('bg-[#1e293b]', 'text-gray-400');
                stakeBtn.classList.add('bg-blue-600', 'text-white', 'shadow-lg');
            }
            fetchUserData(); 
        } else {
            resetDashboard();
        }
    });

    async function fetchUserData() {
        if(!friendlyAddress) return;
        try {
            const response = await fetch(SUPABASE_URL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "apikey": SUPABASE_KEY,
                    "Authorization": `Bearer ${SUPABASE_KEY}`
                },
                body: JSON.stringify({ action: "get_user_stats", wallet: friendlyAddress })
            });
            const data = await response.json();
            if (data && data.success) {
                activeStake = data.stakeData;
                updateDashboardUI();
            }
        } catch (e) { console.error("Sync Error:", e); }
    }

    function updateDashboardUI() {
        const dashBal = document.getElementById('dashboardBalance');
        const usdBal = document.getElementById('usdBalance');
        if(dashBal) dashBal.innerText = `${activeStake.stakedAmount.toFixed(2)} AQUAM`;
        if(usdBal) usdBal.innerText = (activeStake.stakedAmount * currentPrice).toFixed(2);
        
        const pendRew = document.getElementById('pendingReward');
        const expInt = document.getElementById('totalExpectedInterest');
        const totWith = document.getElementById('totalWithdrawn');
        if(pendRew) pendRew.innerHTML = `${activeStake.pendingReward.toFixed(2)} <span class="text-xs text-gray-500">AQUAM</span>`;
        if(expInt) expInt.innerText = `${activeStake.totalExpected.toFixed(2)} AQUAM`;
        if(totWith) totWith.innerText = `${activeStake.totalWithdrawn.toFixed(2)} AQUAM`;

        const maxDays = (currentTier === 'otc') ? 180 : 90;
        const progress = Math.min(100, Math.max(0, ((maxDays - activeStake.daysLeft) / maxDays) * 100));
        
        const progBar = document.getElementById('progressBar');
        const daysDisp = document.getElementById('daysLeftDisplay');
        const endBtn = document.getElementById('endStakeBtn');
        const penWarn = document.getElementById('penaltyWarning');

        if(progBar) progBar.style.width = `${progress}%`;
        
        if(activeStake.daysLeft <= 0 && activeStake.hasActiveStake) {
            if(daysDisp) daysDisp.innerText = "MATURE";
            if(endBtn) endBtn.classList.remove('hidden');
            if(penWarn) penWarn.classList.add('hidden');
        } else {
            if(daysDisp) daysDisp.innerText = `${activeStake.daysLeft || 0} Days Left`;
            if(endBtn) endBtn.classList.add('hidden');
            if(penWarn) penWarn.classList.remove('hidden');
        }
    }

    // --- 3. WITHDRAWAL LOGIC ---
    window.attemptWithdrawal = async function() {
        if (!userWalletAddress) return showToast("Connect Wallet First");
        const minTokens = 10 / currentPrice;
        if (activeStake.pendingReward < minTokens) return showToast(`Min Withdraw: $10 (${minTokens.toFixed(1)} AQUAM)`);

        let penaltyUSD = 0;
        let confirmMsg = "Confirm withdrawal of interest?";
        if (activeStake.daysLeft > 0) {
            penaltyUSD = 5; 
            confirmMsg = `WARNING: Early Withdrawal!\nA $5 penalty will be applied. Proceed?`;
        }

        if(!confirm(confirmMsg)) return;

        const btn = document.querySelector('button[onclick="attemptWithdrawal()"]');
        const oldHtml = btn.innerHTML;
        btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i>';

        try {
            const response = await fetch(SUPABASE_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json", "apikey": SUPABASE_KEY, "Authorization": `Bearer ${SUPABASE_KEY}` },
                body: JSON.stringify({ action: "withdraw_interest", wallet: friendlyAddress, penalty_usd: penaltyUSD })
            });
            const result = await response.json();
            if(result.success) {
                showToast("Withdrawal Success!");
                fetchUserData(); 
            }
        } catch (e) { showToast("Connection Error"); }
        btn.innerHTML = oldHtml;
    }

    // --- 4. END STAKE MODAL LOGIC ---
    window.openEndStakeModal = function() {
        document.getElementById('endStakeModal').classList.remove('hidden');
        document.getElementById('withdrawalWalletInput').value = friendlyAddress;
    }

    window.closeEndStakeModal = function() {
        document.getElementById('endStakeModal').classList.add('hidden');
    }

    window.confirmEndStake = async function() {
        const targetAddr = document.getElementById('withdrawalWalletInput').value;
        if(!targetAddr || targetAddr.length < 10) return showToast("Invalid Wallet");
        closeEndStakeModal();
        showToast("Processing Final Withdrawal...");
        try {
            const response = await fetch(SUPABASE_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json", "apikey": SUPABASE_KEY, "Authorization": `Bearer ${SUPABASE_KEY}` },
                body: JSON.stringify({ action: "end_stake", wallet: friendlyAddress, destination: targetAddr })
            });
            const result = await response.json();
            if(result.success) {
                showToast("Released!");
                setTimeout(() => location.reload(), 2000);
            }
        } catch (e) { showToast("Network Error"); }
    }

    // --- 5. STAKING TRANSACTION ---
    window.processStaking = async function() {
        if (!userWalletAddress) return tonUI.openModal();
        const usdVal = parseFloat(document.getElementById('usdInput').value);
        if(!usdVal || usdVal <= 0) return showToast("Enter Valid Amount");

        try {
            const amountInNano = ((usdVal / currentPrice) * 1000000000).toFixed(0);
            
            const cell = new TonWeb.boc.Cell();
            cell.bits.writeUint(0, 32); 
            cell.bits.writeString(`Deposit:${currentTier}`);
            const payloadBoc = await cell.toBoc();
            const payloadBase64 = TonWeb.utils.bytesToBase64(payloadBoc);

            const transaction = {
                validUntil: Math.floor(Date.now() / 1000) + 300,
                messages: [{
                    address: TREASURY_WALLET,
                    amount: amountInNano.toString(),
                    payload: payloadBase64
                }]
            };

            showToast("Opening Wallet...");
            await tonUI.sendTransaction(transaction);
            showToast("Transaction Sent!");
            setTimeout(fetchUserData, 5000);
        } catch(e) {
            console.error(e);
            showToast("Cancelled or Error");
        }
    }

    // --- UTILITIES ---
    window.calculateTokens = function() {
        const usd = parseFloat(document.getElementById('usdInput').value) || 0;
        document.getElementById('aquamPreview').innerText = `${(usd / currentPrice).toFixed(2)} AQUAM`;
        const stakeBtn = document.getElementById('stakeBtn');
        
        if(userWalletAddress && stakeBtn) {
            if(currentTier === 'otc' && usd < 10000) {
                stakeBtn.disabled = true;
                stakeBtn.innerText = "Min: $10,000";
                stakeBtn.classList.remove('bg-blue-600', 'text-white');
                stakeBtn.classList.add('bg-[#1e293b]', 'text-gray-400');
            } else if(usd < 0.1) {
                stakeBtn.disabled = true;
                stakeBtn.innerText = "Min: $100";
                stakeBtn.classList.remove('bg-blue-600', 'text-white');
                stakeBtn.classList.add('bg-[#1e293b]', 'text-gray-400');
            } else {
                stakeBtn.disabled = false;
                stakeBtn.innerText = "CONFIRM STAKE";
                stakeBtn.classList.add('bg-blue-600', 'text-white');
                stakeBtn.classList.remove('bg-[#1e293b]', 'text-gray-400');
            }
        }
    }

    async function fetchPrice() {
        try {
            const res = await fetch(`https://api.ston.fi/v1/assets/EQA71L6_7UY_aENYSZ_cfbFyUz8SsufxTWyN5Ac80BtX8W9d`);
            const data = await res.json();
            if(data?.asset?.dex_usd_price) {
                currentPrice = parseFloat(data.asset.dex_usd_price);
                document.getElementById('liveRate').innerText = `1 AQUA = $${currentPrice.toFixed(4)}`;
                window.calculateTokens();
            }
        } catch (e) { console.log("Price Offline"); }
    }

    window.pasteAddress = async function() {
        try {
            const text = await navigator.clipboard.readText();
            document.getElementById('withdrawalWalletInput').value = text;
        } catch(e) { showToast("Paste Failed"); }
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        document.getElementById('toastMsg').innerText = msg;
        t.classList.remove('opacity-0', 'pointer-events-none');
        setTimeout(() => t.classList.add('opacity-0', 'pointer-events-none'), 4000);
    }

    function resetDashboard() {
        document.getElementById('stakeBtn').innerText = "Connect Wallet";
        document.getElementById('stakeBtn').classList.remove('bg-blue-600', 'text-white');
        document.getElementById('stakeBtn').classList.add('bg-[#1e293b]', 'text-gray-400');
        
        document.getElementById('dashboardBalance').innerText = "0.00 AQUAM";
        activeStake = { stakedAmount:0, daysLeft:90, pendingReward:0, totalExpected:0, totalWithdrawn:0, hasActiveStake: false };
    }

    fetchPrice();
    setInterval(fetchPrice, 30000);
</script>
</body>
</html>
